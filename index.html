<script src="/uv/uv.bundle.js"></script>
<script src="/uv/uv.config.js"></script>
<script>
    // Ensure Wisp is forced for all WebSocket traffic
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/uv-sw.js', {
            scope: '/service/'
        }).then(() => {
            console.log('UV Service Worker Registered');
        });
    }

    // Use a simpler iframe source that Ultraviolet can rewrite easily
    const discordUrl = "https://e.widgetbot.io/channels/1460470615780753474/1460470616711762079";
    const proxiedUrl = __uv$config.prefix + __uv$config.encodeUrl(discordUrl);
    
    document.getElementById('chat-frame').src = proxiedUrl;
</script>

<iframe id="chat-frame" style="width:100%; height:100%; border:none;"></iframe>
